<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    
    <!-- Theme Initialization Script (moved to top for instant execution) -->
    <script>
      (function() {
        try {
          var localTheme = localStorage.getItem('theme');
          var supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
          var html = document.documentElement;
          var targetColor = '#EBF4FF';
          var isDark = false;
          
          if (localTheme === 'dark' || (!localTheme && supportDarkMode)) {
            html.classList.add('dark');
            html.style.backgroundColor = '#000000';
            targetColor = '#000000';
            isDark = true;
          } else {
            html.classList.remove('dark');
            html.style.backgroundColor = '#EBF4FF';
            targetColor = '#EBF4FF';
            isDark = false;
          }
          
          // CRITICAL: Force update theme-color meta for Safari PWA edges
          var metaThemeColor = document.querySelector('meta[name="theme-color"]');
          if (!metaThemeColor) {
            metaThemeColor = document.createElement('meta');
            metaThemeColor.name = 'theme-color';
            document.head.appendChild(metaThemeColor);
          }
          metaThemeColor.content = targetColor;
          // Remove media attribute to prevent browser from reverting to system preference
          metaThemeColor.removeAttribute('media');

          // Clean up conflicting meta tags if any (robustness)
          var allMetas = document.querySelectorAll('meta[name="theme-color"]');
          for (var i = 0; i < allMetas.length; i++) {
             if (allMetas[i] !== metaThemeColor) {
               allMetas[i].remove();
             }
          }
        } catch (e) {}
      })();
    </script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" type="image/svg+xml" href="/Logo.svg" />

    <title>Project Hub</title>
    <meta
      name="description"
      content="Expert Full Stack Developer specializing in scalable web and mobile applications using React, Next.js, and modern technologies. Building innovative digital solutions."
    />
    <meta name="author" content="Na-thakorn Pikromsuk" />
    <meta
      name="keywords"
      content="Project Hub, Full Stack Developer, Web Development, Mobile App Development, React, Next.js, Thailand Developer, Software Engineer"
    />

    <meta
      property="og:title"
      content="Project Hub | Full Stack Web & Mobile Development"
    />
    <meta
      property="og:description"
      content="Expert Full Stack Developer specializing in scalable web and mobile applications using React, Next.js, and modern technologies."
    />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/Logo.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@ProjectHub" />
    <meta
      name="twitter:title"
      content="Project Hub | Full Stack Web & Mobile Development"
    />
    <meta
      name="twitter:description"
      content="Expert Full Stack Developer specializing in scalable web and mobile applications using React, Next.js, and modern technologies."
    />
    <meta name="twitter:image" content="/Logo.png" />
    <link rel="apple-touch-icon" href="/iOS-Logo-P.png" />

    <!-- Theme Color for Status Bar (will be dynamically updated by JS) -->
    <link rel="apple-touch-icon" href="/iOS-Logo-P.png" />

    <!-- Theme Color matches Script Logic -->


    <!-- PWA Status Bar Style -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Project Hub" />

    <!-- iOS PWA Launch Screen Background Color (Critical for avoiding black screen) -->
    <style>
      /* Immediate background color - loads before any external CSS */
      html {
        background-color: #EBF4FF;
      }
      /* User-selected dark mode via class */
      html.dark {
        background-color: #000000 !important;
      }
      /* User-selected light mode (override system dark) */
      html:not(.dark) {
        background-color: #EBF4FF;
      }
    </style>

    <!-- Web App Manifest -->
    <link rel="manifest" href="/manifest.webmanifest" />

    <!-- Structured Data for SEO & Logo -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "WebSite",
            "name": "Project Hub",
            "url": "https://codex-th.com",
            "description": "Expert Full Stack Developer specializing in scalable web and mobile applications",
            "publisher": {
              "@type": "Person",
              "name": "Na-thakorn Pikromsuk",
              "logo": {
                "@type": "ImageObject",
                "url": "https://codex-th.com/Logo.png"
              }
            }
          },
          {
            "@type": "Person",
            "name": "Na-thakorn Pikromsuk",
            "alternateName": ["Project Hub", "ณฐกร พิกรมสุข", "N'Not"],
            "url": "https://codex-th.com",
            "image": "https://codex-th.com/Logo.png",
            "jobTitle": "Full-Stack Developer",
            "alumniOf": "Khon Kaen University"
          }
        ]
      }
    </script>

  </head>

  <body>
    <div id="root">
      <style>
        .initial-loader {
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh;
          height: 100dvh;
          width: 100%;
          background-color: #EBF4FF;
          transition: background-color 0.3s ease;
        }
        html.dark .initial-loader {
          background-color: #000000;
        }
        @media (prefers-color-scheme: dark) {
          .initial-loader {
            background-color: #000000;
          }
        }
        .initial-loader-content {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 24px;
          animation: fadeIn 0.5s ease-out;
        }
        .initial-logo {
          width: 80px;
          height: 80px;
          animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        .loading-dots {
          display: flex;
          gap: 6px;
        }
        .loading-dot {
          width: 8px;
          height: 8px;
          background: linear-gradient(135deg, #3b82f6, #8b5cf6);
          border-radius: 50%;
          animation: bounce 1s infinite;
        }
        .loading-dot:nth-child(2) { animation-delay: 0.15s; }
        .loading-dot:nth-child(3) { animation-delay: 0.3s; }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
          0%, 100% { transform: scale(1); opacity: 0.8; }
          50% { transform: scale(1.05); opacity: 1; }
        }
        @keyframes bounce {
          0%, 80%, 100% { transform: translateY(0); }
          40% { transform: translateY(-8px); }
        }
      </style>
      <div class="initial-loader">
        <div class="initial-loader-content">
          <img src="/Logo.svg" alt="Project Hub" class="initial-logo" />
          <div class="loading-dots">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
